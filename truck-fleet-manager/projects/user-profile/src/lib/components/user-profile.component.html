<mat-card class="user-profile-card">
  <mat-card-title class="card-title"> Mi Cuenta</mat-card-title>

  <mat-card-content>
    <div class="user-item">
      <p class="user-info">
        Usuario:
        <span *ngIf="!isEditingName">{{ user.name }}</span>
        <mat-form-field *ngIf="isEditingName">
          <input matInput type="text" [(ngModel)]="editedName" />
        </mat-form-field>
      </p>
      <mat-icon
        *ngIf="!isEditingName"
        color="primary"
        (click)="toggleEdit('name')"
        >edit</mat-icon
      >
      <div class="buttons">
        <button
          *ngIf="isEditingName"
          mat-raised-button
          color="primary"
          class="btn-profile"
          (click)="updateName()"
        >
          Confirmar
        </button>
        <button
          *ngIf="isEditingName"
          mat-raised-button
          color="warn"
          class="btn-profile"
          (click)="toggleEdit('name')"
        >
          Cancelar
        </button>
      </div>
    </div>
    <div class="user-item">
      <p class="user-info">
        Email:
        <span *ngIf="!isEditingEmail">{{ user.email }}</span>
        <mat-form-field *ngIf="isEditingEmail">
          <input matInput type="text" [(ngModel)]="editedEmail" />
        </mat-form-field>
      </p>
      <mat-icon
        *ngIf="!isEditingEmail"
        color="primary"
        (click)="toggleEdit('email')"
        >edit</mat-icon
      >
      <div class="buttons">
        <button
          *ngIf="isEditingEmail"
          mat-raised-button
          color="primary"
          class="btn-profile"
          (click)="updateEmail()"
        >
          Confirmar
        </button>
        <button
          *ngIf="isEditingEmail"
          mat-raised-button
          color="warn"
          class="btn-profile"
          (click)="toggleEdit('email')"
        >
          Cancelar
        </button>
      </div>
    </div>

    <details>
      <summary name="change-password">Desea cambiar la contrase単a?</summary>
      <fm-form
        [entityName]="'User'"
        [inputLabels]="[
          'Contrase単a actual',
          'Contrase単a nueva',
          'Repetir contrase単a'
        ]"
        [fields]="['password1', 'password2', 'password3']"
        [editMode]="true"
        (formSubmit)="onSubmit($event)"
      ></fm-form>
    </details>
  </mat-card-content>
</mat-card>
